<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DON SOCIAL</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="./styles.css" />

    <!-- Performance: adelanta conexión con el Pixel -->
    <link rel="preconnect" href="https://connect.facebook.net" crossorigin />
    <link rel="dns-prefetch" href="//connect.facebook.net" />

    <!-- Performance: precarga imagen de fondo del hero (cambiá el href si tu archivo es otro) -->
    <link rel="preload" as="image" href="imagenes/fondo.png" />

    <!-- Meta Pixel Code -->
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '1744862249493660');
      fbq('track', 'PageView');
    </script>
    <noscript>
      <img height="1" width="1" style="display:none"
           src="https://www.facebook.com/tr?id=1744862249493660&ev=PageView&noscript=1" />
    </noscript>
    <!-- End Meta Pixel Code -->
  </head>

  <body>
    <div class="container background-image">
      <div class="overlay"></div>
      <div class="content">
        <!-- Logo PNG -->
        <img src="imagenes/logo.PNG" class="logo" width="240" height="120"
             alt="DON SOCIAL" decoding="async" fetchpriority="high" />

        <p class="title">Envianos un WhatsApp<br />para crear tu cuenta</p>

        <a class="whatsapp-button" id="whatsappButton">
          <span>¡Contactá ya!</span>
          <img src="imagenes/whatsapp.png" alt="whatsapp"
               class="whatsapp-icon" width="24" height="24" decoding="async" loading="lazy" />
        </a>

        <p class="subtitle">Sín Límite de retiro<br />Sín Cronogramas<br />Ganás y cobrás a cualquier hora</p>
        <p class="description">-RED OFICIAL: DON SOCIAL 32-</p>
      </div>
    </div>

    <!-- Script WhatsApp con utm_campaign -> "Prefijo-UTM" -->
    <script>
      // === Configurá tu prefijo acá ===
      const LANDING_PREFIX = "DON-SOCIAL-32"; // Cambiá si querés otro prefijo

      // Lee un parámetro de la URL (?utm_campaign=...)
      function getQueryParam(name) {
        const params = new URLSearchParams(window.location.search);
        const v = params.get(name);
        return v ? decodeURIComponent(v) : null;
      }

      // Normaliza la UTM para el código (sin espacios/símbolos raros)
      function normalizeUtm(v) {
        return String(v || "")
          .trim()
          .replace(/\s+/g, "_")          // espacios -> _
          .replace(/[^A-Za-z0-9_-]/g, "") // quita símbolos raros
          || "ORGANICO";
      }

      // Persistimos utm_campaign si viene en la URL
      (function persistUTM() {
        const utmFromUrl = getQueryParam("utm_campaign");
        if (utmFromUrl) {
          localStorage.setItem("utm_campaign", utmFromUrl);
        }
      })();

      // Obtiene utm_campaign (URL > localStorage > "ORGANICO")
      function getUTMCampaign() {
        return getQueryParam("utm_campaign") || localStorage.getItem("utm_campaign") || "ORGANICO";
      }

      document.getElementById("whatsappButton").addEventListener("click", function () {
        const numeros = [
          "5493518184999", // Juana
          "5493515129415"  // Juana
        ];
        const telefono = numeros[Math.floor(Math.random() * numeros.length)];

        const utm = normalizeUtm(getUTMCampaign());
        const codigo = `${LANDING_PREFIX}-${utm}`;

        const mensaje = `Hola! Vi este anuncio, quisiera un nuevo usuario.\n\n${codigo}`;
        const link = "https://wa.me/" + telefono + "?text=" + encodeURIComponent(mensaje);

        window.open(link, "_blank", "noopener");
      });
    </script>
  </body>
</html>
